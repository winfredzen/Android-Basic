# adb常用命令

可参考：

+ [adbshell](https://adbshell.com/)
+ [AdbCommands](https://gist.github.com/Pulimet/5013acf2cd5b28e55036c82c91bd56d8)
+ [ADB 常用命令](https://wl9739.github.io/2017/05/22/ADB-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/)



## adb devices

List of devices attached

```shell
adb devices
```

List connected devices (-l for long output)

```shell
adb devices -l
```

![008](https://github.com/winfredzen/Android-Basic/blob/master/adb/images/008.png)

如果有多个设备

```shell
adb -s <device_name> shell 进入指定的设备shell
```

```shell
adb -s 80QBCNP234K3 install game.apk
```



## Activity Manager

am (Activity Manager) 命令用来启动一个 APP、启动 Activity、启动广播和服务等等。

启动一个 Activity，最简单的命令可以使用

```shell
adb shell am start com.package.name/com.package.name.ActivityName
```

> 除了默认启动的 Activity 以外，打开其他的 Activity 时，需要在 AndroidManifest 文件中添加 `android:exported="true"` 属性。



如果我们要启动一个隐式的 Intent，也就是说我们需要传入 action 等参数，在 [ADB 调试桥](https://developer.android.com/studio/command-line/adb.html) 中可以得知 Intent 的参数规范，比如 `-a` 表示 `action`，`-c` 表示 `category` ，`-d` 表示 `data_uri`，`-e` 表示添加额外 Key-Value 信息。比如：

```shell
adb shell am start -a "android.intent.action.VIEW" -d "https://www.baidu.com"
```

上面这个命令会启动一个浏览器打开 `https://www.baidu.com` 页面 (如果有多个浏览器，会让用户进行选择) 。







## File Manager

**1.adb pull**

从 Android 设备复制文件或目录及其子目录

如下的例子

```shell
adb pull /mnt/sdcard/Download/test.pdf /Users/wangzhen/Desktop/download 
```

在未root的手机上会提示`Permission denied`

![007](https://github.com/winfredzen/Android-Basic/blob/master/adb/images/007.png)

**2.adb push**

将本地文件/目录复制到 Android 设备

```shell
adb push pc.apk /mnt/sdcard/Download/test.apk
```



## Package Manager

**1.adb install**

```shell
adb install -r test.apk
```

reinstall an existing app, keeping its data

```shell
adb install -g test.apk
```

Grant all permissions listed in the app manifest





## Key event

```shell
adb shell input keyevent 3 // Home btn
adb shell input keyevent 4 // Back btn
```





























