# anr

参考：

+ [应用与系统稳定性第一篇---ANR问题分析的一般套路](https://www.jianshu.com/p/18f16aba79dd)







## 类型



### 1. `IPCThreadState::waitForResponse`

![017](https://github.com/winfredzen/Android-Basic/blob/master/%E4%BC%98%E5%8C%96/images/017.png)

网路上有说是：

> **binder线程池被占满**系统对每个process最多分配15个binder线程，这个是谷歌的设计（/frameworks/native/libs/binder/ProcessState.cpp)如果另一个process发送太多重复binder请求，那么就会导致接收端binder线程被占满，从而处理不了其它的binder请求

我自己无法确定



## 原因



###  1. SharedPreference阻塞主线程

参考：

+ [深入 SharedPreferences：架构、缺点和优化](https://www.dalvik.work/2022/05/16/sharedpreferences/#)



> 构造 `SharedPreferences` 实例时会立即起一个线程来将磁盘上的 `xml` 文件加载并解析为内存中的 `Map`，在加载任务完成前，会通过 `mLock` 阻塞所有的 `get/set` 操作



















