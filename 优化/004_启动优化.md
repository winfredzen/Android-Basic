# 启动优化



## 启动时间测量方式

**1.`adb`方法**

格式为`adb shell am start -W 包名/全类名或叫activity名`

+ `-W` - 等待启动完成

可参考：

+ [调用 activity 管理器 (`am`)](https://developer.android.com/studio/command-line/adb)



```
adb shell am start -W com.xxx.xxx/com.xxx.xxx.MainActivity
```

![007](https://github.com/winfredzen/Android-Basic/blob/master/%E4%BC%98%E5%8C%96/images/007.png)

![008](https://github.com/winfredzen/Android-Basic/blob/master/%E4%BC%98%E5%8C%96/images/008.png)



adb命令方式：

+ 线下使用方便，不能带到线上
+ 非严谨、精确的时间



**2.手动打点**

启动时埋点，启动结束埋点，计算二者差值

**启动** - Application的`attachBaseContext`

**结束** 

![009](https://github.com/winfredzen/Android-Basic/blob/master/%E4%BC%98%E5%8C%96/images/009.png)

```java
public class LaunchTimer {

    private static long sTime;

    public static void startRecord() {
        sTime = System.currentTimeMillis();
    }

    public static void endRecord() {
        endRecord("");
    }

    public static void endRecord(String msg) {
        long cost = System.currentTimeMillis() - sTime;
        LogUtils.i(msg + "cost " + cost);
    }

}
```



手动打点方式：

+ 精确，可带到线上，推荐使用



## 其它

可参考如下的文章：

+ [Android启动优化方案探索！](https://mp.weixin.qq.com/s/B3aX1NyVNR3k1waoMsxb_g)





































