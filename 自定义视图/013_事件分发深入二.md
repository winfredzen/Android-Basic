
# 事件分发深入二

本文内容来自《Android自定义控件高级进阶与精彩实例》

主要是研究`ACTION_MOVE`消息的流向

`ACTION_MOVE`和`ACTION_UP`的消息流向是完全相同的



## dispatchTouchEvent函数中返回true时`ACTION_MOVE`的消息流向

**1.TextView的dispatchTouchEvent函数中返回true**

控制台的输出结果如下：

```java
2021-10-19 09:50:09.657 14839-14839/com.touch.harvic.testtouchevent D/qijian: SecondActivity dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 09:50:09.658 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 09:50:09.658 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup onInterceptTouchEvent  EVENT: ACTION DOWN
2021-10-19 09:50:09.658 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 09:50:09.659 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup onInterceptTouchEvent  EVENT: ACTION DOWN
2021-10-19 09:50:09.659 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomTextView dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 09:50:10.224 14839-14839/com.touch.harvic.testtouchevent D/qijian: SecondActivity dispatchTouchEvent  EVENT: ACTION_MOVE
2021-10-19 09:50:10.224 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup dispatchTouchEvent  EVENT: ACTION_MOVE
2021-10-19 09:50:10.224 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup onInterceptTouchEvent  EVENT: ACTION_MOVE
2021-10-19 09:50:10.225 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup dispatchTouchEvent  EVENT: ACTION_MOVE
2021-10-19 09:50:10.225 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup onInterceptTouchEvent  EVENT: ACTION_MOVE
2021-10-19 09:50:10.225 14839-14839/com.touch.harvic.testtouchevent D/qijian: CustomTextView dispatchTouchEvent  EVENT: ACTION_MOVE
```

图形表示如下（红色表示`ACTION_DOWN`，蓝色表示`ACTION_MOVE`）：

![124](https://github.com/winfredzen/Android-Basic/blob/master/自定义视图/images/124.jpeg)



**2.在ViewGroup2的dispatchTouchEvent函数中返回true**

![125](https://github.com/winfredzen/Android-Basic/blob/master/自定义视图/images/125.jpeg)



**3.在ViewGroup1的dispatchTouchEvent函数中返回true**

![126](https://github.com/winfredzen/Android-Basic/blob/master/自定义视图/images/126.jpeg)



**4.在Activity的dispatchTouchEvent函数中返回true**

![127](https://github.com/winfredzen/Android-Basic/blob/master/自定义视图/images/127.jpeg)



## 传递到onTouchEvent函数后的`ACTION_MOVE`的消息

**1.正常情况下的ACTION_MOVE消息传递过程**

即在所有的函数中都不拦截消息的情况下

控制的输出结果如下，可以看出`ACTION_MOVE`和`ACTION_DOWN`的区别

```java
2021-10-19 10:27:28.290 15126-15126/com.touch.harvic.testtouchevent D/qijian: SecondActivity dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.290 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.290 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup onInterceptTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.291 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.291 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup onInterceptTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.291 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomTextView dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.291 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomTextView onTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.291 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup onTouchEvent   EVENT: ACTION DOWN
2021-10-19 10:27:28.291 15126-15126/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup onTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.291 15126-15126/com.touch.harvic.testtouchevent D/qijian: SecondActivity onTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:27:28.324 15126-15126/com.touch.harvic.testtouchevent D/qijian: SecondActivity dispatchTouchEvent  EVENT: ACTION_MOVE
2021-10-19 10:27:28.324 15126-15126/com.touch.harvic.testtouchevent D/qijian: SecondActivity onTouchEvent  EVENT: ACTION_MOVE
2021-10-19 10:27:28.408 15126-15126/com.touch.harvic.testtouchevent D/qijian: SecondActivity dispatchTouchEvent  EVENT: ACTION_MOVE
```

![128](https://github.com/winfredzen/Android-Basic/blob/master/自定义视图/images/128.jpeg)



**2.当在onTouchEvent函数中拦截ACTION_DOWN消息**

当ViewGroup2的`onTouchEvent`函数返回`true`时

```java
2021-10-19 10:36:11.576 15303-15336/com.touch.harvic.testtouchevent D/EGL_emulation: eglMakeCurrent: 0xe081a240: ver 3 0 (tinfo 0xe080f250)
2021-10-19 10:36:14.685 15303-15303/com.touch.harvic.testtouchevent D/qijian: SecondActivity dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:36:14.685 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:36:14.686 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup onInterceptTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:36:14.686 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:36:14.686 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup onInterceptTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:36:14.686 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomTextView dispatchTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:36:14.686 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomTextView onTouchEvent  EVENT: ACTION DOWN
2021-10-19 10:36:14.686 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup onTouchEvent   EVENT: ACTION DOWN
2021-10-19 10:36:14.806 15303-15303/com.touch.harvic.testtouchevent D/qijian: SecondActivity dispatchTouchEvent  EVENT: ACTION_MOVE
2021-10-19 10:36:14.806 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup dispatchTouchEvent  EVENT: ACTION_MOVE
2021-10-19 10:36:14.806 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomFirstGroup onInterceptTouchEvent  EVENT: ACTION_MOVE
2021-10-19 10:36:14.806 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup dispatchTouchEvent  EVENT: ACTION_MOVE
2021-10-19 10:36:14.806 15303-15303/com.touch.harvic.testtouchevent D/qijian: CustomSecondGroup onTouchEvent   EVENT: ACTION_MOVE
```

![129](https://github.com/winfredzen/Android-Basic/blob/master/自定义视图/images/129.jpeg)















































