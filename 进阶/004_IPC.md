# IPC

IPC全称是`Inter-Process Communication`，含义为进程间通信或者跨进程通信，是指两个进程之间进行数据交换的过程



IPC中的一些基本概念：

+ Serializable接口
+ Parcelable接口
+ Binder



## 序列化

为什么要序列化？

+ 永久性保存对象，保存对象的字节序列到本地文件中
+ 通过序列化对象在网络中传递对象
+ 通过序列化在进程间传递对象

> Android中实现序列化有两个选择：一是实现`Serializable`接口（是JavaSE本身就支持的），一是实现`Parcelable`接口（是Android特有功能，效率比实现`Serializable`接口高效，可用于Intent数据传递，也可以用于进程间通信（IPC））。实现Serializable接口非常简单，声明一下就可以了，而实现`Parcelable`接口稍微复杂一些，但效率更高，推荐用这种方法提高性能。
>
> 注：Android中`Intent`传递对象有两种方法：一是`Bundle.putSerializable(Key，Object)`，另一种是`Bundle.putParcelable(Key，Object)`。当然这些Object是有一定的条件的，前者是实现了`Serializable`接口，而后者是实现了`Parcelable`接口。

参考：

+ [详细介绍Android中Parcelable的原理和使用方法](https://www.jianshu.com/p/32a2ec8f35ae)



## Binder

Binder是Android中的一个类，实现了IBinder接口

```java
public class Binder extends Object implements IBinder
```

> + 从IPC角度来说，Binder是Android中的一种跨进程通信方式
> + 从Android Framework角度来说，Binder是ServiceManager连接各种Manager(ActivityManager、WindowManager等等)和相应的ManagerService的桥梁
> + 从Android应用层来说，Binder是客户端和服务端进行通信的媒介，当bindService的时候，服务端会返回一个包含了服务端业务调用的Binder对象，通过这个Binder对象，客户端就可以获取服务端的服务或者数据，这里的服务包括普通服务和基于AIDL的服务

**创建AIDL文件**

![010](https://github.com/winfredzen/Android-Basic/blob/master/%E8%BF%9B%E9%98%B6/image/010.png)

创建后，会在`main`目录下，多出一个`aidl`目录，包名与`java`目录下的相同

![011](https://github.com/winfredzen/Android-Basic/blob/master/%E8%BF%9B%E9%98%B6/image/011.png)





Service参考文档：

+ [Android Service完全解析，关于服务你所需知道的一切(上)](https://blog.csdn.net/guolin_blog/article/details/11952435)
+ [Android Service完全解析，关于服务你所需知道的一切(下)](https://blog.csdn.net/guolin_blog/article/details/9797169)



其它[Android IPC 之Service 还可以这么理解](https://www.jianshu.com/p/f5e08b06bf7a)





